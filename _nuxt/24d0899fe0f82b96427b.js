(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{188:function(e,t,r){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",function(){return o})},189:function(e,t,r){"use strict";r.d(t,"c",function(){return l}),r.d(t,"h",function(){return d}),r.d(t,"f",function(){return f}),r.d(t,"g",function(){return h}),r.d(t,"i",function(){return v}),r.d(t,"d",function(){return m}),r.d(t,"b",function(){return y}),r.d(t,"a",function(){return O}),r.d(t,"e",function(){return w});r(45);var n=r(40),o=r(188),c=(r(114),r(115),r(6));r(76);function l(e){return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}function d(e){"object"!==Object(c.a)(e)&&(e=new Date(e));var t,r=Math.floor((+new Date-+e)/1e3),n=Math.floor(r/31536e3);return n>=1?t="year":(n=Math.floor(r/2592e3))>=1?t="month":(n=Math.floor(r/86400))>=1?t="day":(n=Math.floor(r/3600))>=1?t="hour":(n=Math.floor(r/60))>=1?t="minute":(n=r,t="second"),(n>1||0===n)&&(t+="s"),n+" "+t}function f(e,t,r){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function h(e){return Math.round(100*e)/100}function v(e){return"https://www.youtube.com/embed/"+m(e)+"?autoplay=1"}function m(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11===t[2].length?t[2]:"error"}var y=function(){function e(t){var r=t.endCallback,o=t.durationMs;Object(n.a)(this,e),this.start=new Date,this.durationMs=o,this.endCallback=r,this.timerId=window.setTimeout(r,o)}return Object(o.a)(e,[{key:"isActive",value:function(){return!!(this.timerId&&this.percentProgress()<100)}},{key:"cancel",value:function(){if(null===this.timerId)throw new Error("Double cancel of timer");window.clearTimeout(this.timerId),this.timerId=null}},{key:"percentProgress",value:function(){var e=(Date.now()-this.start.getTime())/this.durationMs*100;return e>100?100:e}}]),e}(),O=function(){function e(t){var r=t.durationMs,o=t.progressCallback;Object(n.a)(this,e),this.start=new Date,this.durationMs=r,this.progressCallback=o,this.intervalId=window.setInterval(o,r)}return Object(o.a)(e,[{key:"cancel",value:function(){if(null===this.intervalId)throw new Error("Double cancel of timer");window.clearInterval(this.intervalId),this.intervalId=null}}]),e}();function w(desc){return"/q?t=".concat(desc.name,"&q=").concat(encodeURIComponent(desc.sql))}},190:function(e,t,r){"use strict";r.d(t,"a",function(){return m}),r.d(t,"c",function(){return O}),r.d(t,"b",function(){return j});r(61);var n=r(7),o=r(78),c=r.n(o),l="https://us-east1-ubershmekel.cloudfunctions.net/tags3-api";var d=l+"?q=",f=l+"?notifyquery=1",h=l+"?unsubscribe=",v={validateStatus:function(e){return!0}};function m(e){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={results:null,error:null},performance.now(),e.prev=2,e.next=5,c.a.get(d+encodeURIComponent(t),v);case 5:n=e.sent,console.log("query res",n),n.data.error?r.error=n.data.error:r.results=n.data,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?r.error=e.t0.message:r.error=""+e.t0;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function O(e){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark(function e(data){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={error:"Failed to send subscribe request",success:""},e.prev=1,e.next=4,c.a.post(f,data,v);case 4:r=e.sent,console.log("subscribe res",r),t=r.data,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?t.error=e.t0.message:t.error=""+e.t0;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function j(e){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={error:"Failed to send unsubscribe request",success:""},e.prev=1,n=h+t,e.next=5,c.a.get(n,v);case 5:o=e.sent,console.log("unsubscribe res",o),r=o.data,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?r.error=e.t0.message:r.error=""+e.t0;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}},191:function(e,t,r){var content=r(203);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("d737cf14",content,!0,{sourceMap:!1})},194:function(e,t,r){"use strict";r(44),r(20),r(77);var n=r(40),o=r(188),c=r(42),l=r(41),d=r(43),f=r(6),h=r(17),v=r(189),m=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},y=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"truncate",value:function(e){var text=String(e);return text.length>100&&(text=text.slice(0,100)+" [...]"),text}},{key:"sortedKeys",value:function(){var e=Object.keys(this.$props.results[0]);return e.sort(),e=e.filter(function(e){return"audio_url"!==e&&"is_collection"!==e})}}]),t}(h.Vue),O=y=m([Object(h.Component)({props:{results:Array,options:Object},methods:{compactNumber:v.c,timeSince:v.h}})],y),w=(r(202),r(11)),component=Object(w.a)(O,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",{staticClass:"query-results-table"},[r("thead",{staticClass:"table-header"},[r("tr",e._l(e.sortedKeys(),function(t){return r("th",{key:t},[e._v(e._s(t))])}),0)]),e._v(" "),r("tbody",e._l(e.results,function(t,n){return r("tr",{key:n,staticClass:"item-row"},e._l(e.sortedKeys(),function(o){return r("td",{key:n+"-"+o,staticClass:"item-cell",attrs:{title:t[o]}},[r("div",{staticClass:"item-cell-wrapper"},[e._v("\n        "+e._s(t[o])+"\n        ")])])}),0)}),0)])},[],!1,null,"c33d3c34",null);t.a=component.exports},202:function(e,t,r){"use strict";var n=r(191);r.n(n).a},203:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,".item[data-v-c33d3c34]{border-radius:4px;padding:4px;background-color:#333;margin:1em;border-left:1px solid #ddd;display:flex;flex-direction:row;align-items:flex-start}.domain[data-v-c33d3c34]{opacity:.6}.item-title[data-v-c33d3c34]{display:block}.item-meta[data-v-c33d3c34]{color:#999}.item-info[data-v-c33d3c34]{vertical-align:top;margin-left:.5em}.item-thumb-container[data-v-c33d3c34]{height:80px;width:80px;min-width:80px;background-color:hsla(0,0%,48.2%,.2)}.item-thumb[data-v-c33d3c34]{width:80px;height:80px;-o-object-fit:cover;object-fit:cover}.stats[data-v-c33d3c34]{opacity:.6}table[data-v-c33d3c34]{border-collapse:collapse;margin-bottom:10px;width:100%}td[data-v-c33d3c34],th[data-v-c33d3c34]{padding:6px;text-align:left}th[data-v-c33d3c34]{border-bottom:1px solid #333}tbody tr[data-v-c33d3c34]:nth-child(odd){background-color:#1a1a1a}.item-cell-wrapper[data-v-c33d3c34]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;max-height:2em;max-width:20em}",""])},207:function(e,t,r){var content=r(265);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("eb5a5e58",content,!0,{sourceMap:!1})},208:function(e,t,r){var content=r(267);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("a4b24bb6",content,!0,{sourceMap:!1})},264:function(e,t,r){"use strict";var n=r(207);r.n(n).a},265:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,".error[data-v-69e84930]{color:red}",""])},266:function(e,t,r){"use strict";var n=r(208);r.n(n).a},267:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,"h3[data-v-4ca9d70e]{border-top:2px solid #999}",""])},283:function(e,t,r){"use strict";r.r(t);var n=r(40),o=r(42),c=r(41),l=r(43),d=r(6),f=r(17),h=(r(61),r(7)),v=r(188),m=r(194),y=r(190),O=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},w=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).apply(this,arguments))).results=null,e.error="",e}return Object(l.a)(t,e),Object(v.a)(t,[{key:"created",value:function(){var e=Object(h.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(this.query);case 2:(t=e.sent).results?this.results=t.results||"":this.error=t.error||"";case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(f.Vue);O([Object(f.Prop)(String)],w.prototype,"query",void 0);var j=w=O([Object(f.Component)({methods:{},components:{QueryTable:m.a}})],w),x=(r(264),r(11)),k=Object(x.a)(j,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.results?r("QueryTable",{attrs:{results:e.results}}):e._e(),e._v(" "),e.error?r("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e()],1)},[],!1,null,"69e84930",null).exports,R=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},_=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(f.Vue),C=_=R([Object(f.Component)({components:{QueryFetchTable:k}})],_),E=(r(266),Object(x.a)(C,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h2",[e._v("Status")]),e._v(" "),r("h3",[e._v("Totals")]),e._v(" "),r("QueryFetchTable",{attrs:{query:"SELECT domain, COUNT(*) FROM url GROUP BY domain"}}),e._v(" "),r("h3",[e._v("Last 6 hours")]),e._v(" "),r("QueryFetchTable",{attrs:{query:"SELECT domain, COUNT(*) FROM url WHERE timestamp > NOW() - INTERVAL '6 hours' GROUP BY domain"}}),e._v(" "),r("h3",[e._v("By likes")]),e._v(" "),r("QueryFetchTable",{attrs:{query:"SELECT domain, CASE WHEN likes > 0 THEN ROUND(LOG(likes)) ELSE 0 END AS loglikes, COUNT(*) FROM url GROUP BY loglikes, domain ORDER BY loglikes DESC"}})],1)},[],!1,null,"4ca9d70e",null));t.default=E.exports}}]);