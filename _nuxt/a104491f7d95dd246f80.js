(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{186:function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"c",function(){return c}),r.d(e,"b",function(){return l});r(112);var n=r(6);r(75);function o(t){return t>=1e9?(t/1e9).toFixed(1).replace(/\.0$/,"")+"G":t>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"K":t}function c(t){"object"!==Object(n.a)(t)&&(t=new Date(t));var e,r=Math.floor((+new Date-+t)/1e3),o=Math.floor(r/31536e3);return o>=1?e="year":(o=Math.floor(r/2592e3))>=1?e="month":(o=Math.floor(r/86400))>=1?e="day":(o=Math.floor(r/3600))>=1?e="hour":(o=Math.floor(r/60))>=1?e="minute":(o=r,e="second"),(o>1||0===o)&&(e+="s"),o+" "+e}function l(t,e,r){return t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}},187:function(t,e,r){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}r.d(e,"a",function(){return o})},189:function(t,e,r){var content=r(199);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("c616123a",content,!0,{sourceMap:!1})},190:function(t,e,r){var content=r(201);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("5c98055f",content,!0,{sourceMap:!1})},191:function(t,e,r){var content=r(203);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("ae333d7e",content,!0,{sourceMap:!1})},196:function(t,e,r){t.exports=r.p+"img/034b164.svg"},197:function(t,e,r){t.exports=r.p+"img/0db5626.svg"},198:function(t,e,r){"use strict";var n=r(189);r.n(n).a},199:function(t,e,r){(t.exports=r(22)(!1)).push([t.i,".item[data-v-7c0d5f6d]{border-radius:4px;padding:4px;background-color:#333;margin:1em;border-left:1px solid #ddd;display:flex;flex-direction:row;align-items:flex-start}.domain[data-v-7c0d5f6d]{opacity:.6}.item-title[data-v-7c0d5f6d]{display:block}.item-meta[data-v-7c0d5f6d]{color:#999}.item-info[data-v-7c0d5f6d]{vertical-align:top;margin-left:.5em}.item-thumb-container[data-v-7c0d5f6d]{height:80px;width:80px;min-width:80px;background-color:hsla(0,0%,48.2%,.2)}.item-thumb[data-v-7c0d5f6d]{width:80px;height:80px;-o-object-fit:cover;object-fit:cover}.stats[data-v-7c0d5f6d]{opacity:.6}.list-enter-active[data-v-7c0d5f6d],.list-leave-active[data-v-7c0d5f6d]{transition:all 1s;transition-delay:calc(var(--animation-order)*50ms)}.list-enter[data-v-7c0d5f6d],.list-leave-to[data-v-7c0d5f6d]{opacity:0;transform:translateY(30px);transition-delay:calc(var(--animation-order)*50ms)}",""])},200:function(t,e,r){"use strict";var n=r(190);r.n(n).a},201:function(t,e,r){(t.exports=r(22)(!1)).push([t.i,".item[data-v-0caa82d2]{border-radius:4px;padding:4px;background-color:#333;margin:1em;border-left:1px solid #ddd;display:flex;flex-direction:row;align-items:flex-start}.domain[data-v-0caa82d2]{opacity:.6}.item-title[data-v-0caa82d2]{display:block}.item-meta[data-v-0caa82d2]{color:#999}.item-info[data-v-0caa82d2]{vertical-align:top;margin-left:.5em}.item-thumb-container[data-v-0caa82d2]{height:80px;width:80px;min-width:80px;background-color:hsla(0,0%,48.2%,.2)}.item-thumb[data-v-0caa82d2]{width:80px;height:80px;-o-object-fit:cover;object-fit:cover}.stats[data-v-0caa82d2]{opacity:.6}table[data-v-0caa82d2]{border-collapse:collapse;margin-bottom:10px;width:100%}td[data-v-0caa82d2],th[data-v-0caa82d2]{padding:6px;text-align:left}th[data-v-0caa82d2]{border-bottom:1px solid #333}tbody tr[data-v-0caa82d2]:nth-child(odd){background-color:#1a1a1a}",""])},202:function(t,e,r){"use strict";var n=r(191);r.n(n).a},203:function(t,e,r){(t.exports=r(22)(!1)).push([t.i,".query-input[data-v-7b3efa4e]{width:100%;box-sizing:border-box}.error[data-v-7b3efa4e]{color:red}hr[data-v-7b3efa4e]{border:none;border-top:1px solid #333}.query-controls label[data-v-7b3efa4e]{margin-right:.5em}.spinner[data-v-7b3efa4e]{width:100px}",""])},209:function(t,e,r){"use strict";r.r(e);r(60);var n=r(8),o=r(39),c=r(187),l=r(41),d=r(40),f=r(42),h=r(6),m=r(24),v=r(186),y=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c},_=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(m.Vue),w=_=y([Object(m.Component)({props:{results:Array,options:Object},methods:{compactNumber:v.a,timeSince:v.c}})],_),x=(r(198),r(11)),j=Object(x.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition-group",{attrs:{name:"list",tag:"div"}},t._l(t.results,function(e,o){return n("div",{key:o,staticClass:"item",style:"--animation-order:"+o},[t.options.noThumbnails?t._e():n("a",{staticClass:"item-thumb-container",attrs:{href:e.url}},[e.thumbnail_url?n("img",{staticClass:"item-thumb",attrs:{src:e.thumbnail_url,onerror:"this.style.display='none'"}}):t._e(),t._v(" "),e.thumbnail_url?t._e():n("img",{staticClass:"item-thumb",attrs:{src:r(197)}})]),t._v(" "),n("div",{staticClass:"item-info"},[n("a",{staticClass:"item-title",attrs:{href:e.url}},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"item-meta"},[e.likes?n("span",{staticClass:"like-count"},[t._v(t._s(t.compactNumber(e.likes))+"‚¨Ü")]):t._e(),t._v(" "),e.views?n("span",{staticClass:"view-count"},[t._v(t._s(t.compactNumber(e.views))+"üëÅ")]):t._e(),t._v(" "),n("span",{staticClass:"domain",attrs:{title:e.timestamp}},[t._v("\n            / "+t._s(e.domain)+"\n            "),e.channel&&e.channel!==e.user?[t._v("\n              / "+t._s(e.channel)+"\n              / "+t._s(e.user)+"\n            ")]:[t._v("/ "+t._s(e.user))],t._v("\n            / "+t._s(t.timeSince(e.timestamp))+" ago\n          ")],2)])])])}),0)],1)},[],!1,null,"7c0d5f6d",null).exports,O=(r(43),r(19),r(76),function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c}),k=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"truncate",value:function(t){var text=String(t);return text.length>100&&(text=text.slice(0,100)+" [...]"),text}},{key:"sortedKeys",value:function(){var t=Object.keys(this.$props.results[0]);return t.sort(),t=t.filter(function(t){return"audio_url"!==t&&"is_collection"!==t})}}]),e}(m.Vue),T=k=O([Object(m.Component)({props:{results:Array,options:Object},methods:{compactNumber:v.a,timeSince:v.c}})],k),C=(r(200),Object(x.a)(T,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"query-results-table"},[r("thead",{staticClass:"table-header"},[r("tr",t._l(t.sortedKeys(),function(e){return r("th",{key:e},[t._v(t._s(e))])}),0)]),t._v(" "),r("tbody",t._l(t.results,function(e,n){return r("tr",{key:n,staticClass:"item-row"},t._l(t.sortedKeys(),function(o){return r("td",{key:n+"-"+o,staticClass:"item-cell",attrs:{title:e[o]}},[t._v("\n        "+t._s(t.truncate(e[o]))+"\n      ")])}),0)}),0)])},[],!1,null,"0caa82d2",null).exports),R=r(77),$=r.n(R),P=function(t,e,r,desc){var n,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(o<3?n(c):o>3?n(e,r,c):n(e,r))||c);return o>3&&c&&Object.defineProperty(e,r,c),c};var D={noThumbnails:"!nothumbs",showTable:"!table"},A=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).apply(this,arguments))).query="",t.results=null,t.error="",t.queryDuration=null,t.options={noThumbnails:!1,showTable:!1},t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"fetch",value:function(t){console.log("fetch",t)}},{key:"asyncData",value:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.route.query.q,console.log("AsyncData",r),t.abrupt("return",{query:r});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"validate",value:function(t){return!0}},{key:"beforeUpdate",value:function(){console.log("beforeUpdate")}},{key:"setOptionsFromQuery",value:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e in console.log("Setting options from query"),D)r=D[e],this.query.indexOf(r)>=0?(console.log("cmdKey",e,!0),this.options[e]=!0):(console.log("cmdKey",e,!1),this.options[e]=!1);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchQueryData",value:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,o,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r in e=this.query,D)n=D[r],e.indexOf(n)>=0&&(e=Object(v.b)(e,n,""));return o={validateStatus:function(t){return!0}},c=performance.now(),t.prev=4,t.next=7,$.a.get("https://us-east1-ubershmekel.cloudfunctions.net/tags3-api?q="+encodeURI(e),o);case 7:l=t.sent,this.queryDuration=performance.now()-c,console.log("query res",l),l.data.error?this.error=l.data.error:this.results=l.data,t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(4),console.error("Failed to fetch query",t.t0),t.t0&&t.t0.message?this.error=t.t0.message:this.error=""+t.t0,t.abrupt("return");case 18:case"end":return t.stop()}},t,this,[[4,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"created",value:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("created"),this.query=this.$route.query.q,console.log("This query created",this.query),this.setOptionsFromQuery(),this.fetchQueryData();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"watchCommandProp",value:function(t,e){console.log("watchCommandProp",t,e);var r=this.query.indexOf(e)>=0;t&&!r&&(this.query=this.query+" "+e),!t&&r&&(this.query=Object(v.b)(this.query," "+e,""))}},{key:"onNoThumbnailsChanged",value:function(t,e){this.watchCommandProp(t,D.noThumbnails)}},{key:"onShowTableChanged",value:function(t,e){this.watchCommandProp(t,D.showTable)}}]),e}(m.Vue);P([Object(m.Watch)("options.noThumbnails")],A.prototype,"onNoThumbnailsChanged",null),P([Object(m.Watch)("options.showTable")],A.prototype,"onShowTableChanged",null);var M=A=P([Object(m.Component)({components:{QueryCards:j,QueryTable:C},watchQuery:!0,methods:{compactNumber:v.a,timeSince:v.c}})],A),N=(r(202),Object(x.a)(M,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("form",[n("input",{staticClass:"query-input",attrs:{name:"q",action:"/q"},domProps:{value:t.query}})]),t._v(" "),n("div",{staticClass:"query-controls"},[n("label",{staticClass:"pointer teal",attrs:{for:"noThumbnails"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.noThumbnails,expression:"options.noThumbnails"}],attrs:{type:"checkbox",id:"noThumbnails"},domProps:{checked:Array.isArray(t.options.noThumbnails)?t._i(t.options.noThumbnails,null)>-1:t.options.noThumbnails},on:{change:function(e){var r=t.options.noThumbnails,n=e.target,o=!!n.checked;if(Array.isArray(r)){var c=t._i(r,null);n.checked?c<0&&t.$set(t.options,"noThumbnails",r.concat([null])):c>-1&&t.$set(t.options,"noThumbnails",r.slice(0,c).concat(r.slice(c+1)))}else t.$set(t.options,"noThumbnails",o)}}}),t._v("No thumbnails")]),t._v(" "),n("label",{staticClass:"pointer teal",attrs:{for:"showTable"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.options.showTable,expression:"options.showTable"}],attrs:{type:"checkbox",id:"showTable"},domProps:{checked:Array.isArray(t.options.showTable)?t._i(t.options.showTable,null)>-1:t.options.showTable},on:{change:function(e){var r=t.options.showTable,n=e.target,o=!!n.checked;if(Array.isArray(r)){var c=t._i(r,null);n.checked?c<0&&t.$set(t.options,"showTable",r.concat([null])):c>-1&&t.$set(t.options,"showTable",r.slice(0,c).concat(r.slice(c+1)))}else t.$set(t.options,"showTable",o)}}}),t._v("Table view")]),t._v(" "),t.queryDuration?n("span",{staticClass:"stats"},[t._v("(took "+t._s(Math.round(t.queryDuration)/1e3)+" s)")]):t._e()]),t._v(" "),t.error?n("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"data-container"},[null===t.results?n("img",{staticClass:"spinner",attrs:{src:r(196)}}):t._e(),t._v(" "),t.results&&0===t.results.length?n("div",[t._v("No results. Tweak that query...")]):t._e(),t._v(" "),n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[t.options.showTable?t._e():n("QueryCards",{attrs:{results:t.results,options:t.options}}),t._v(" "),t.options.showTable&&t.results?n("QueryTable",{attrs:{results:t.results,options:t.options}}):t._e()],1)],1)])},[],!1,null,"7b3efa4e",null));e.default=N.exports}}]);