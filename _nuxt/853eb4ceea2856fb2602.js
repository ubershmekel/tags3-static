(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{188:function(t,e,n){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return o})},189:function(t,e,n){"use strict";n.d(e,"c",function(){return d}),n.d(e,"h",function(){return l}),n.d(e,"f",function(){return f}),n.d(e,"g",function(){return h}),n.d(e,"i",function(){return v}),n.d(e,"d",function(){return m}),n.d(e,"b",function(){return w}),n.d(e,"a",function(){return y}),n.d(e,"e",function(){return x});n(45);var r=n(40),o=n(188),c=(n(114),n(115),n(6));n(76);function d(t){return t>=1e9?(t/1e9).toFixed(1).replace(/\.0$/,"")+"B":t>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"K":t}function l(t){"object"!==Object(c.a)(t)&&(t=new Date(t));var e,n=Math.floor((+new Date-+t)/1e3),r=Math.floor(n/31536e3);return r>=1?e="year":(r=Math.floor(n/2592e3))>=1?e="month":(r=Math.floor(n/86400))>=1?e="day":(r=Math.floor(n/3600))>=1?e="hour":(r=Math.floor(n/60))>=1?e="minute":(r=n,e="second"),(r>1||0===r)&&(e+="s"),r+" "+e}function f(t,e,n){return t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function h(t){return Math.round(100*t)/100}function v(t){return"https://www.youtube.com/embed/"+m(t)+"?autoplay=1"}function m(t){var e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return e&&11===e[2].length?e[2]:"error"}var w=function(){function t(e){var n=e.endCallback,o=e.durationMs;Object(r.a)(this,t),this.start=new Date,this.durationMs=o,this.endCallback=n,this.timerId=window.setTimeout(n,o)}return Object(o.a)(t,[{key:"isActive",value:function(){return!!(this.timerId&&this.percentProgress()<100)}},{key:"cancel",value:function(){if(null===this.timerId)throw new Error("Double cancel of timer");window.clearTimeout(this.timerId),this.timerId=null}},{key:"percentProgress",value:function(){var t=(Date.now()-this.start.getTime())/this.durationMs*100;return t>100?100:t}}]),t}(),y=function(){function t(e){var n=e.durationMs,o=e.progressCallback;Object(r.a)(this,t),this.start=new Date,this.durationMs=n,this.progressCallback=o,this.intervalId=window.setInterval(o,n)}return Object(o.a)(t,[{key:"cancel",value:function(){if(null===this.intervalId)throw new Error("Double cancel of timer");window.clearInterval(this.intervalId),this.intervalId=null}}]),t}();function x(desc){return"/q?t=".concat(desc.name,"&q=").concat(encodeURIComponent(desc.sql))}},209:function(t,e,n){var content=n(269);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("6ff55c0d",content,!0,{sourceMap:!1})},268:function(t,e,n){"use strict";var r=n(209);n.n(r).a},269:function(t,e,n){(t.exports=n(23)(!1)).push([t.i,".header[data-v-7cf6b410]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.sub-card[data-v-7cf6b410]{display:block;margin:1em;padding:0;overflow:hidden;border-radius:10px;opacity:.8}.sub-card[data-v-7cf6b410]:hover{opacity:1}.sub-name[data-v-7cf6b410]{font-size:2em}.sub-stats[data-v-7cf6b410]{opacity:.6}.sub-meta[data-v-7cf6b410]{padding:.2em}.sub-previews-container[data-v-7cf6b410]{max-height:200px}.sub-preview[data-v-7cf6b410]{display:inline-block;height:100px;vertical-align:top;overflow:hidden;padding:4px;box-sizing:border-box;border-radius:4px}.sub-preview img[data-v-7cf6b410]{height:100%;width:100%;-o-object-fit:contain;object-fit:contain}.text-preview[data-v-7cf6b410]{padding:4px;max-width:200px;box-shadow:2px 2px 12px #000;height:100%}@media (max-width:600px){.sub-preview[data-v-7cf6b410]{width:100px}}.tag-button[data-v-7cf6b410]{display:inline-block;margin:.5em;padding:.2em;border-radius:4px;border:1px solid #666;background-color:#252525}.nuxt-link-exact-active[data-v-7cf6b410]{background-color:#666}",""])},286:function(t,e,n){"use strict";n.r(e);n(61);var r=n(7),o=n(40),c=n(188),d=n(42),l=n(41),f=n(43),h=n(6),v=n(17),m=n(189),w=n(78),y=n.n(w),x=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(d.a)(this,Object(l.a)(e).apply(this,arguments))).subreddits=[],t.subsTag="sfw",t}return Object(f.a)(e,t),Object(c.a)(e,[{key:"fetch",value:function(t){console.log("fetch",t)}},{key:"asyncData",value:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=_(e.route.query),console.log("AsyncData",n),t.abrupt("return",{subsTag:n});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"validate",value:function(t){return console.log("validate subsTag",t.route.query,this.subsTag),!0}},{key:"refresh",value:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,data,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.subsTag=_(this.$route.query),this.subreddits=[],e="/data/top-subs-".concat(this.subsTag,".json"),data=j[e]){t.next=10;break}return t.next=7,y.a.get(e);case 7:n=t.sent,data=n.data,j[e]=data;case 10:this.subreddits=data;case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"beforeUpdate",value:function(){console.log("beforeUpdate"),this.refresh()}},{key:"created",value:function(){console.log("created"),this.refresh()}}]),e}(v.Vue);k=x([Object(v.Component)({components:{},watchQuery:!0,methods:{compactNumber:m.c}})],k);var j={};function _(t){return"nsfw"===t.tag?"nsfw":"sfw"}var O=k,C=(n(268),n(11)),component=Object(C.a)(O,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("header",[n("h1",{staticClass:"header"},[t._v("Subreddits")]),t._v(" "),t._l(["sfw","nsfw"],function(e){return n("nuxt-link",{key:e,staticClass:"tag-button",attrs:{to:"?tag="+e}},[t._v(t._s(e))])})],2),t._v(" "),n("div",{staticClass:"cards"},t._l(t.subreddits.slice(0,40),function(sub){return n("a",{key:sub.name,staticClass:"sub-card card-back",attrs:{href:"https://www.reddit.com/r/"+sub.name+"/top?t=all"}},[n("div",{staticClass:"sub-meta"},[n("div",{staticClass:"sub-name"},[t._v("/r/"+t._s(sub.name))]),t._v(" "),n("div",{staticClass:"sub-stats"},[t._v(t._s(t.compactNumber(sub.subscribers))+" subscribers. "+t._s(sub.title))])]),t._v(" "),n("div",{staticClass:"sub-previews-container"},t._l(sub.top,function(e,r){return n("div",{key:r,staticClass:"sub-preview"},[e.thumb?n("img",{attrs:{src:e.thumb,title:e.title,onerror:"this.parentElement.style.display='none'"}}):t._e(),t._v(" "),e.thumb?t._e():n("div",{staticClass:"text-preview"},[t._v(t._s(e.title))])])}),0)])}),0)])},[],!1,null,"7cf6b410",null);e.default=component.exports}}]);