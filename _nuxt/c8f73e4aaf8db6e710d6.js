(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{187:function(e,t,r){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",function(){return o})},188:function(e,t,r){"use strict";r.d(t,"c",function(){return l}),r.d(t,"g",function(){return d}),r.d(t,"e",function(){return f}),r.d(t,"f",function(){return m}),r.d(t,"h",function(){return v}),r.d(t,"d",function(){return h}),r.d(t,"b",function(){return y}),r.d(t,"a",function(){return O});var n=r(40),o=r(187),c=(r(114),r(115),r(6));r(76);function l(e){return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}function d(e){"object"!==Object(c.a)(e)&&(e=new Date(e));var t,r=Math.floor((+new Date-+e)/1e3),n=Math.floor(r/31536e3);return n>=1?t="year":(n=Math.floor(r/2592e3))>=1?t="month":(n=Math.floor(r/86400))>=1?t="day":(n=Math.floor(r/3600))>=1?t="hour":(n=Math.floor(r/60))>=1?t="minute":(n=r,t="second"),(n>1||0===n)&&(t+="s"),n+" "+t}function f(e,t,r){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function m(e){return Math.round(100*e)/100}function v(e){return"https://www.youtube.com/embed/"+h(e)+"?autoplay=1"}function h(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11===t[2].length?t[2]:"error"}var y=function(){function e(t){var r=t.endCallback,o=t.durationMs;Object(n.a)(this,e),this.start=new Date,this.durationMs=o,this.endCallback=r,this.timerId=window.setTimeout(r,o)}return Object(o.a)(e,[{key:"isActive",value:function(){return!!(this.timerId&&this.percentProgress()<100)}},{key:"cancel",value:function(){if(null===this.timerId)throw new Error("Double cancel of timer");window.clearTimeout(this.timerId),this.timerId=null}},{key:"percentProgress",value:function(){var e=(Date.now()-this.start.getTime())/this.durationMs*100;return e>100?100:e}}]),e}(),O=function(){function e(t){var r=t.durationMs,o=t.progressCallback;Object(n.a)(this,e),this.start=new Date,this.durationMs=r,this.progressCallback=o,this.intervalId=window.setInterval(o,r)}return Object(o.a)(e,[{key:"cancel",value:function(){if(null===this.intervalId)throw new Error("Double cancel of timer");window.clearInterval(this.intervalId),this.intervalId=null}}]),e}()},189:function(e,t,r){var content=r(198);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("16dced34",content,!0,{sourceMap:!1})},190:function(e,t,r){var content=r(200);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("4d70133f",content,!0,{sourceMap:!1})},192:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r(61);var n=r(8),o=r(77),c=r.n(o),l="https://us-east1-ubershmekel.cloudfunctions.net/tags3-api?q=";function d(e){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={results:null,error:null},n={validateStatus:function(e){return!0}},performance.now(),e.prev=3,e.next=6,c.a.get(l+encodeURI(t),n);case 6:o=e.sent,console.log("query res",o),o.data.error?r.error=o.data.error:r.results=o.data,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?r.error=e.t0.message:r.error=""+e.t0;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,null,[[3,11]])}))).apply(this,arguments)}},193:function(e,t,r){"use strict";var n=r(40),o=r(187),c=r(42),l=r(41),d=r(43),f=r(6),m=r(17),v=r(188),h=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},y=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"userQueryLink",value:function(e){return'/q?q=SELECT * FROM url WHERE "user" = \''.concat(e,"' ORDER BY likes DESC LIMIT 50")}},{key:"domainQueryLink",value:function(e){return'/q?q=SELECT * FROM url WHERE "domain" = \''.concat(e,"' ORDER BY likes DESC LIMIT 50")}}]),t}(m.Vue);h([Object(m.Prop)(Object)],y.prototype,"item",void 0);var O=y=h([Object(m.Component)({methods:{compactNumber:v.c,timeSince:v.g},components:{}})],y),j=(r(199),r(11)),component=Object(j.a)(O,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"item-info"},[r("a",{staticClass:"item-title",attrs:{href:e.item.url}},[e._v(e._s(e.item.title))]),e._v(" "),r("div",{staticClass:"item-meta"},[e.item.likes?r("span",{staticClass:"like-count"},[e._v(e._s(e.compactNumber(e.item.likes))+"‚¨Ü")]):e._e(),e._v(" "),e.item.views?r("span",{staticClass:"view-count"},[e._v(e._s(e.compactNumber(e.item.views))+"üëÅ")]):e._e(),e._v(" "),r("span",{staticClass:"domain",attrs:{title:e.item.timestamp}},[e._v("\n      / "),r("nuxt-link",{attrs:{to:e.domainQueryLink(e.item.domain)}},[e._v(e._s(e.item.domain))]),e._v(" "),e.item.channel&&e.item.channel!==e.item.user?[e._v("\n        / "+e._s(e.item.channel)+"\n      ")]:e._e(),e._v("\n      / "),r("nuxt-link",{attrs:{to:e.userQueryLink(e.item.user)}},[e._v(e._s(e.item.user))]),e._v("\n      / "+e._s(e.timeSince(e.item.timestamp))+" ago\n      / "),r("nuxt-link",{attrs:{to:"/url?url="+e.item.url}},[e._v("t")])],2)])])},[],!1,null,"2dbecc3a",null);t.a=component.exports},194:function(e,t,r){"use strict";var n=r(40),o=r(187),c=r(42),l=r(41),d=r(43),f=r(6),m=r(17),v=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},h=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).apply(this,arguments))).onEnded=void 0,e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onMuteChange",value:function(e,t){this.$el.muted=e}},{key:"progress",value:function(){var e=this.$el;if(e&&e.duration>0)return 100*e.currentTime/e.duration;throw new Error("Invalid video element progress")}},{key:"scrollEvent",value:function(e){var t=this.$el;(function(e){var rect=e.getBoundingClientRect(),t=rect.top,r=rect.bottom;return t<window.innerHeight&&r>=0})(t)||t.paused||t.pause()}},{key:"created",value:function(){window.addEventListener("scroll",this.scrollEvent)}},{key:"destroyed",value:function(){window.removeEventListener("scroll",this.scrollEvent)}},{key:"mounted",value:function(){var e=this,t=this.$el;t.muted=this.mute,this.autoPlay&&(t.autoplay=!0);var r=!1;t.addEventListener("timeupdate",function(n){t.currentTime<.1&&!r&&(r=!0,e.onEnded&&e.onEnded(n),1,setTimeout(function(){r=!1},500))},!0)}}]),t}(m.Vue);v([Object(m.Prop)(Boolean)],h.prototype,"mute",void 0),v([Object(m.Prop)(String)],h.prototype,"videoUrl",void 0),v([Object(m.Prop)(String)],h.prototype,"audioUrl",void 0),v([Object(m.Prop)(String)],h.prototype,"poster",void 0),v([Object(m.Prop)(Boolean)],h.prototype,"autoPlay",void 0),v([Object(m.Prop)(Function)],h.prototype,"onEnded",void 0),v([Object(m.Watch)("mute")],h.prototype,"onMuteChange",null);var y=h=v([Object(m.Component)({methods:{}})],h),O=r(11),component=Object(O.a)(y,function(){var e=this.$createElement,t=this._self._c||e;return t("video",{attrs:{playsinline:"",loop:"",controls:"",poster:this.poster?this.poster:"true"}},[t("source",{attrs:{src:this.videoUrl}}),this._v(" "),t("source",{attrs:{src:this.audioUrl,type:"audio/aac"}})])},[],!1,null,"f4f09a94",null);t.a=component.exports},197:function(e,t,r){"use strict";var n=r(189);r.n(n).a},198:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,".item-main[data-v-7eecfe0e]{max-width:100%;max-height:80vh}item-image[data-v-7eecfe0e]{min-height:40px}.item-view-container[data-v-7eecfe0e]{text-align:center;display:block;background-color:#222;max-width:100%;max-height:80vh}.play-button[data-v-7eecfe0e]{height:50%;display:block;position:absolute;left:0;right:0;bottom:0;top:0;margin:auto;opacity:.6;pointer-events:none}.maybe-play-button-container[data-v-7eecfe0e]{position:relative}",""])},199:function(e,t,r){"use strict";var n=r(190);r.n(n).a},200:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,".item[data-v-2dbecc3a]{border-radius:4px;padding:4px;background-color:#333;margin:1em;border-left:1px solid #ddd}.domain[data-v-2dbecc3a]{opacity:.6}.domain a[data-v-2dbecc3a]{font-weight:400}.item-title[data-v-2dbecc3a]{display:block}.item-meta[data-v-2dbecc3a]{color:#999}.item-info[data-v-2dbecc3a]{vertical-align:top;margin-left:.5em}.stats[data-v-2dbecc3a]{opacity:.6}",""])},210:function(e,t,r){var content=r(242);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("273d8cb1",content,!0,{sourceMap:!1})},211:function(e,t,r){var content=r(244);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(24).default)("7b6c34c8",content,!0,{sourceMap:!1})},213:function(e,t,r){"use strict";var n=r(40),o=r(42),c=r(41),l=r(43),d=r(6),f=r(17),m=r(194),v=r(188),h=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},y=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).apply(this,arguments))).youtubePlay=!1,e}return Object(l.a)(t,e),t}(f.Vue);h([Object(f.Prop)(Object)],y.prototype,"item",void 0);var O=y=h([Object(f.Component)({methods:{youtubeEmbedUrl:v.h},components:{Video:m.a}})],y),j=(r(197),r(11)),component=Object(j.a)(O,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"item-view-container"},[e.item.video_url?r("Video",{key:e.item.video_url,staticClass:"item-main item-video",attrs:{"auto-play":!1,"video-url":e.item.video_url,"audio-url":e.item.audio_url,poster:e.item.image_url}}):e._e(),e._v(" "),e.item.image_url&&!e.item.video_url?r("img",{staticClass:"item-main item-image",attrs:{src:e.item.image_url,onerror:"this.style.display='none'"}}):e._e(),e._v(" "),e.youtubePlay?e._e():r("div",{staticClass:"maybe-play-button-container",on:{click:function(t){e.youtubePlay=!0}}},[!e.item.thumbnail_url||e.item.image_url||e.item.video_url?e._e():r("img",{staticClass:"item-main item-image",attrs:{src:e.item.thumbnail_url,onerror:"this.style.display='none'"}}),e._v(" "),"youtube.com"===e.item.domain?r("svg",{staticClass:"play-button",attrs:{viewBox:"0 0 200 200"}},[r("polygon",{staticStyle:{fill:"white","stroke-width":"0"},attrs:{points:"0,0 200,100 0,200"}})]):e._e()]),e._v(" "),"youtube.com"===e.item.domain?r("div",{staticClass:"youtube-embed item-main"},[e.youtubePlay?r("div",[r("iframe",{attrs:{width:"100%",height:"315",src:e.youtubeEmbedUrl(e.item.url),frameborder:"0",autoplay:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):e._e()]):e._e()],1)},[],!1,null,"7eecfe0e",null);t.a=component.exports},241:function(e,t,r){"use strict";var n=r(210);r.n(n).a},242:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,".error[data-v-84cde9d0]{color:red}",""])},243:function(e,t,r){"use strict";var n=r(211);r.n(n).a},244:function(e,t,r){(e.exports=r(23)(!1)).push([e.i,"h3[data-v-745e9495]{border-top:2px solid #999}",""])},251:function(e,t,r){"use strict";r.r(t);r(61);var n=r(8),o=r(40),c=r(187),l=r(42),d=r(41),f=r(43),m=r(6),v=r(17),h=r(192),y=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},O=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).apply(this,arguments))).results=null,e.error="",e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"created",value:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)(this.query);case 2:(t=e.sent).results?this.results=t.results||"":this.error=t.error||"";case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(v.Vue);y([Object(v.Prop)(String)],O.prototype,"query",void 0);var j=O=y([Object(v.Component)({methods:{},components:{}})],O),_=(r(241),r(11)),w=Object(_.a)(j,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("pre",[e._v("    "+e._s(e.results)+"\n  ")]),e._v(" "),e.error?r("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e()])},[],!1,null,"84cde9d0",null).exports,k=r(213),R=r(193),E=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},x=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).apply(this,arguments))).url="",e.item=null,e.error="",e}return Object(f.a)(t,e),Object(c.a)(t,[{key:"created",value:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"mounted",value:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof(t=this.$route.query.url)&&(this.url=t),console.log("Mounted",this.url),r="SELECT * FROM url WHERE url = '".concat(this.url,"'"),e.next=6,Object(h.a)(r);case 6:(n=e.sent).results?this.item=n.results[0]||null:this.error=n.error||"";case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"asyncData",value:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"refetchUrl",value:function(){}},{key:"head",value:function(){var title="Url Info Page";return this.item&&(title=this.item.title),console.log("head called",title),{title:title}}}]),t}(v.Vue),C=x=E([Object(v.Component)({components:{QueryFetchUrl:w,EmbedCard:k.a,EmbedInfo:R.a}})],x),P=(r(243),Object(_.a)(C,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e.item?r("div",{staticClass:"item-info"},[r("h2",[e._v("Url Page")]),e._v(" "),r("EmbedInfo",{attrs:{item:e.item}}),e._v(" "),r("EmbedCard",{attrs:{item:e.item}}),e._v(" "),r("h3",[e._v("Data")]),e._v(" "),r("pre",[e._v(e._s(e.item))]),e._v(" "),e.error?r("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e()],1):e._e(),e._v(" "),e.url?e._e():r("div",[e._v("No url :/")])])},[],!1,null,"745e9495",null));t.default=P.exports}}]);