(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return o})},189:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return v}),n.d(t,"i",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return C}),n.d(t,"e",function(){return I});n(45);var r=n(40),o=n(188),c=(n(114),n(115),n(6));n(76);function l(e){return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e}function d(e){"object"!==Object(c.a)(e)&&(e=new Date(e));var t,n=Math.floor((+new Date-+e)/1e3),r=Math.floor(n/31536e3);return r>=1?t="year":(r=Math.floor(n/2592e3))>=1?t="month":(r=Math.floor(n/86400))>=1?t="day":(r=Math.floor(n/3600))>=1?t="hour":(r=Math.floor(n/60))>=1?t="minute":(r=n,t="second"),(r>1||0===r)&&(t+="s"),r+" "+t}function m(e,t,n){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function v(e){return Math.round(100*e)/100}function f(e){return"https://www.youtube.com/embed/"+h(e)+"?autoplay=1"}function h(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11===t[2].length?t[2]:"error"}var y=function(){function e(t){var n=t.endCallback,o=t.durationMs;Object(r.a)(this,e),this.start=new Date,this.durationMs=o,this.endCallback=n,this.timerId=window.setTimeout(n,o)}return Object(o.a)(e,[{key:"isActive",value:function(){return!!(this.timerId&&this.percentProgress()<100)}},{key:"cancel",value:function(){if(null===this.timerId)throw new Error("Double cancel of timer");window.clearTimeout(this.timerId),this.timerId=null}},{key:"percentProgress",value:function(){var e=(Date.now()-this.start.getTime())/this.durationMs*100;return e>100?100:e}}]),e}(),C=function(){function e(t){var n=t.durationMs,o=t.progressCallback;Object(r.a)(this,e),this.start=new Date,this.durationMs=n,this.progressCallback=o,this.intervalId=window.setInterval(o,n)}return Object(o.a)(e,[{key:"cancel",value:function(){if(null===this.intervalId)throw new Error("Double cancel of timer");window.clearInterval(this.intervalId),this.intervalId=null}}]),e}();function I(desc){return"/q?t=".concat(desc.name,"&q=").concat(encodeURIComponent(desc.sql))}},191:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"c",function(){return C}),n.d(t,"b",function(){return w});n(61);var r=n(7),o=n(78),c=n.n(o),l="https://us-east1-ubershmekel.cloudfunctions.net/tags3-api";var d=l+"?q=",m=l+"?notifyquery=1",v=l+"?unsubscribe=",f={validateStatus:function(e){return!0}};function h(e){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={results:null,error:null},performance.now(),e.prev=2,e.next=5,c.a.get(d+encodeURIComponent(t),f);case 5:r=e.sent,console.log("query res",r),r.data.error?n.error=r.data.error:n.results=r.data,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?n.error=e.t0.message:n.error=""+e.t0;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function C(e){return I.apply(this,arguments)}function I(){return(I=Object(r.a)(regeneratorRuntime.mark(function e(data){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={error:"Failed to send subscribe request",success:""},e.prev=1,e.next=4,c.a.post(m,data,f);case 4:n=e.sent,console.log("subscribe res",n),t=n.data,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?t.error=e.t0.message:t.error=""+e.t0;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function w(e){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={error:"Failed to send unsubscribe request",success:""},e.prev=1,r=v+t,e.next=5,c.a.get(r,f);case 5:o=e.sent,console.log("unsubscribe res",o),n=o.data,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Failed to fetch query",e.t0),e.t0&&e.t0.message?n.error=e.t0.message:n.error=""+e.t0;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}},195:function(e,t,n){"use strict";n(76);var r=n(40),o=n(188),c=n(42),l=n(41),d=n(43),m=n(6),v=n(17),f=n(189),h=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},y=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"channelQueryLink",value:function(e){return'/q?q=SELECT * FROM url WHERE "channel" = \''.concat(e,"' ORDER BY likes DESC LIMIT 50")}},{key:"userQueryLink",value:function(e){return'/q?q=SELECT * FROM url WHERE "user" = \''.concat(e,"' ORDER BY likes DESC LIMIT 50")}},{key:"domainQueryLink",value:function(e){return'/q?q=SELECT * FROM url WHERE "domain" = \''.concat(e,"' ORDER BY likes DESC LIMIT 50")}},{key:"noDotCom",value:function(e){return e.replace(".com","")}}]),t}(v.Vue);h([Object(v.Prop)(Object)],y.prototype,"item",void 0);var C=y=h([Object(v.Component)({methods:{compactNumber:f.c,timeSince:f.h},components:{}})],y),I=(n(234),n(11)),component=Object(I.a)(C,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-info"},[n("a",{staticClass:"item-title",attrs:{href:e.item.url}},[e._v(e._s(e.item.title))]),e._v(" "),n("div",{staticClass:"item-meta"},[e.item.likes?n("span",{staticClass:"like-count"},[e._v(e._s(e.compactNumber(e.item.likes))+"‚¨Ü")]):e._e(),e._v(" "),e.item.views?n("span",{staticClass:"view-count"},[e._v(e._s(e.compactNumber(e.item.views))+"üëÅ")]):e._e(),e._v(" "),n("span",{staticClass:"domain",attrs:{title:e.item.timestamp}},[e._v("\n      / "),n("nuxt-link",{attrs:{to:e.domainQueryLink(e.item.domain)}},[e._v(e._s(e.noDotCom(e.item.domain)))]),e._v(" "),e.item.channel&&e.item.channel!==e.item.user?[e._v("\n        / "),n("nuxt-link",{attrs:{to:e.channelQueryLink(e.item.channel)}},[e._v(e._s(e.item.channel))])]:e._e(),e._v("\n      / "),n("nuxt-link",{attrs:{to:e.userQueryLink(e.item.user)}},[e._v(e._s(e.item.user))]),e._v("\n      / "+e._s(e.timeSince(e.item.timestamp))+" ago\n      / "),n("nuxt-link",{attrs:{to:"/url?url="+e.item.url}},[e._v("t")])],2)])])},[],!1,null,"aba676b0",null);t.a=component.exports},200:function(e,t,n){var content=n(233);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(24).default)("768956e0",content,!0,{sourceMap:!1})},201:function(e,t,n){var content=n(235);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(24).default)("77fe35df",content,!0,{sourceMap:!1})},223:function(e,t,n){"use strict";var r=n(40),o=n(42),c=n(41),l=n(43),d=n(6),m=n(17),v=n(228),f=n(189),h=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},y=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).apply(this,arguments))).youtubePlay=!1,e}return Object(l.a)(t,e),t}(m.Vue);h([Object(m.Prop)(Object)],y.prototype,"item",void 0);var C=y=h([Object(m.Component)({methods:{youtubeEmbedUrl:f.i},components:{Video:v.a}})],y),I=(n(232),n(11)),component=Object(I.a)(C,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"item-view-container"},[e.item.video_url?r("Video",{key:e.item.video_url,staticClass:"item-main item-video",attrs:{"auto-play":!1,"video-url":e.item.video_url,"audio-url":e.item.audio_url,poster:e.item.image_url}}):e._e(),e._v(" "),e.item.image_url&&!e.item.video_url?r("img",{staticClass:"item-main item-image",attrs:{src:e.item.image_url,onerror:"this.style.display='none'"}}):e._e(),e._v(" "),"youtube.com"!==e.item.domain||e.youtubePlay?e._e():r("div",{staticClass:"maybe-play-button-container",on:{click:function(t){e.youtubePlay=!0}}},[!e.item.thumbnail_url||e.item.image_url||e.item.video_url?e._e():r("img",{staticClass:"item-main item-image",attrs:{src:e.item.thumbnail_url,onerror:"this.style.display='none'"}}),e._v(" "),r("img",{staticClass:"play-button",attrs:{src:n(231)}})]),e._v(" "),"youtube.com"===e.item.domain&&e.youtubePlay?r("div",{staticClass:"youtube-embed item-main"},[r("iframe",{attrs:{width:"100%",height:"315",src:e.youtubeEmbedUrl(e.item.url),frameborder:"0",autoplay:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]):e._e()],1)},[],!1,null,"7db6a710",null);t.a=component.exports},228:function(e,t,n){"use strict";var r=n(40),o=n(188),c=n(42),l=n(41),d=n(43),m=n(6),v=n(17),f=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},h=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onMuteChange",value:function(e,t){this.$el.muted=e}},{key:"progress",value:function(){var e=this.$el;return e&&e.duration>0?100*e.currentTime/e.duration:0}},{key:"scrollEvent",value:function(e){var t=this.$el;(function(e){var rect=e.getBoundingClientRect(),t=rect.top,n=rect.bottom;return t<window.innerHeight&&n>=0})(t)||t.paused||t.pause()}},{key:"created",value:function(){window.addEventListener("scroll",this.scrollEvent)}},{key:"destroyed",value:function(){window.removeEventListener("scroll",this.scrollEvent)}},{key:"mounted",value:function(){var e=this,t=this.$el;t.muted=this.mute,this.autoPlay&&(t.autoplay=!0);var n=!1;t.addEventListener("timeupdate",function(r){t.currentTime<.1&&!n&&(n=!0,e.onEnded?e.onEnded(r):console.log("Video ended but no on-ended handler"),1,setTimeout(function(){n=!1},500))},!0)}}]),t}(v.Vue);f([Object(v.Prop)(Boolean)],h.prototype,"mute",void 0),f([Object(v.Prop)(String)],h.prototype,"videoUrl",void 0),f([Object(v.Prop)(String)],h.prototype,"audioUrl",void 0),f([Object(v.Prop)(String)],h.prototype,"poster",void 0),f([Object(v.Prop)(Boolean)],h.prototype,"autoPlay",void 0),f([Object(v.Prop)(Function)],h.prototype,"onEnded",void 0),f([Object(v.Watch)("mute")],h.prototype,"onMuteChange",null);var y=h=f([Object(v.Component)({methods:{}})],h),C=n(11),component=Object(C.a)(y,function(){var e=this.$createElement,t=this._self._c||e;return t("video",{attrs:{playsinline:"",loop:"",controls:"",poster:this.poster}},[t("source",{attrs:{src:this.videoUrl}}),this._v(" "),this.audioUrl?t("source",{attrs:{src:this.audioUrl,type:"audio/aac"}}):this._e()])},[],!1,null,"5854d559",null);t.a=component.exports},231:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgaGVpZ2h0PSIyMDgiCiAgIHdpZHRoPSIyMDAiCiAgIGlkPSJzdmc0IgogICB2ZXJzaW9uPSIxLjEiCiAgIHZpZXdCb3g9IjAgMCAyMDAgMjA4Ij4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExMCI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGRlZnMKICAgICBpZD0iZGVmczgiIC8+CiAgPHBvbHlnb24KICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIgogICAgIGlkPSJwb2x5Z29uMi03IgogICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjAiCiAgICAgcG9pbnRzPSIwLDAgMjAwLDEwMCAwLDIwMCAiIC8+CiAgPHBvbHlnb24KICAgICBpZD0icG9seWdvbjIiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MCIKICAgICBwb2ludHM9IjAsMjAwIDAsMCAyMDAsMTAwICIgLz4KPC9zdmc+Cg=="},232:function(e,t,n){"use strict";var r=n(200);n.n(r).a},233:function(e,t,n){(e.exports=n(23)(!1)).push([e.i,".item-main[data-v-7db6a710]{max-width:100%;max-height:80vh}item-image[data-v-7db6a710]{min-height:40px}.item-view-container[data-v-7db6a710]{text-align:center;display:block;background-color:#222;max-width:100%;max-height:80vh}.play-button[data-v-7db6a710]{height:50%;display:block;position:absolute;left:0;right:0;bottom:0;top:0;margin:auto;opacity:.9;pointer-events:none}.maybe-play-button-container[data-v-7db6a710]{position:relative;cursor:pointer}",""])},234:function(e,t,n){"use strict";var r=n(201);n.n(r).a},235:function(e,t,n){(e.exports=n(23)(!1)).push([e.i,".item[data-v-aba676b0]{border-radius:4px;padding:4px;background-color:#333;margin:1em;border-left:1px solid #ddd}.domain[data-v-aba676b0]{opacity:.6}.domain a[data-v-aba676b0]{font-weight:400}.item-title[data-v-aba676b0]{display:block}.item-meta[data-v-aba676b0]{color:#999}.item-info[data-v-aba676b0]{vertical-align:top;margin-left:.5em}.stats[data-v-aba676b0]{opacity:.6}",""])}}]);